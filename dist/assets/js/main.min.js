"use strict";var str=document.querySelector("#textarea"),work=document.querySelector(".btn.work"),clear=document.querySelector(".btn.clear"),result=document.querySelector(".result"),message=document.querySelector("h2.message"),larger=document.querySelector(".btn.larger"),darkmode=document.querySelector(".btn.darkmode"),readOptions=document.querySelector(".read-options"),placeholder="Paste your text in!",placeholderErr="It won't work without any text...",splitText=document.querySelector(".split-text"),makeHeaders=document.querySelector(".make-headers");
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var paragsMaker=function(t){var e;console.log(t),null!=t&&null!=t&&(e=t=_typeof(t)==Array?t.join(" "):t,(t=document.createElement("p")).innerHTML=e,result.append(t))},headerMaker=function(t){var e;null!=t&&null!=t&&(e=t.toString(),(t=document.createElement("h3")).innerHTML=e,result.append(t))},splitter=function(t,e){var n=[],r=0;for(1==e&&headerMaker(t.shift());t.length;)for(var o=0;o<4;o++)n.push(t.shift()),3==o&&(paragsMaker(n),n=[],r++),3==r&&1==e&&(headerMaker(t.shift()),r=0)},mainFunc=function(t,e){for(var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=(t=t.value).split(e),o=[];0<r.length-1;)o.push(new Array(r.shift(),r.shift()).join("").trim());splitter(o,n),lastParagMargin()};
"use strict";var lastParagMargin=function(){for(var e=document.querySelectorAll("#result-area p"),a=0;a<e.length-1;a++)"H3"==e[a].nextElementSibling.tagName&&(e[a].className="last-parag")};str.placeholder=placeholder;var styling=function(){!(0<arguments.length&&void 0!==arguments[0])||arguments[0]?(message.classList.add("active"),result.classList.add("active"),readOptions.classList.add("active")):(message.classList.remove("active"),result.classList.remove("active"),readOptions.classList.remove("active"),result.classList.remove("darkmode"),str.value="",result.innerHTML="",str.placeholder=placeholder,makeHeaders.checked=!1,splitText.checked=!1)};str.addEventListener("focusin",function(){work.disabled=!1});var proveFunc=function(){return""!=str.value&&null!=str.value||(str.placeholder=placeholderErr,!1)};function largerFunc(e){function a(a,r){l.forEach(function(e){e.style.fontSize=a}),t.forEach(function(e){e.style.fontSize=r})}var l=document.querySelectorAll("#result-area p"),t=document.querySelectorAll("#result-area h3");"make larger"==larger.value?(larger.value="make normal",a("1.4rem","2rem")):"make normal"==larger.value&&(larger.value="make larger",a("1rem","1.75rem"))}function darkModeFunc(e){"dark mode"==darkmode.value?(darkmode.value="day mode",result.classList.add("darkmode")):"day mode"==darkmode.value&&(darkmode.value="dark mode",result.classList.remove("darkmode"))}splitText.addEventListener("change",function(){var e=makeHeaders.closest("div");1==this.checked?e.style.visibility="visible":e.style.visibility="hidden"});
"use strict";var addProgressBar=function(){var e=document.createElement("div");e.id="progress-container",e.innerHTML='<div id="progress-bar"></div>',document.body.appendChild(e)},readingProgress=function(e){var r=window.pageYOffset-600||document.documentElement.scrollTop-600,e=e.offsetTop+e.scrollHeight-780,e=100-(e-(r+window.outerHeight)+window.outerHeight/3)/(e-window.outerHeight+window.outerHeight/3)*100;document.querySelector("#progress-bar").style.width=e+"%",100<e?document.querySelector("#progress-container").classList.add("ready"):document.querySelector("#progress-container").classList.remove("ready")};document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".result");addProgressBar(),readingProgress(e);var r=document.querySelector("#progress-bar"),o=document.querySelector(".back-to-top");window.addEventListener("scroll",function(){600<window.pageYOffset&&(readingProgress(e),r.classList.add("show")),window.pageYOffset>window.innerHeight/1.5?o.classList.add("show"):o.classList.remove("show")})});
"use strict";work.addEventListener("click",function(){var e=proveFunc();e&&1==splitText.checked?(styling(!0),1==makeHeaders.checked&&mainFunc(str,/(\.|\!|\?)/,!0),mainFunc(str,/(\.|\!|\?)/,!1)):e&&0==splitText.checked&&(styling(!0),paragsMaker(str.value)),this.disabled=!0,clear.disabled=!1}),clear.disabled=!0,clear.addEventListener("click",function(){styling(!1),work.disabled=!1,this.disabled=!0}),larger.addEventListener("click",function(e){proveFunc()&&largerFunc(e)}),darkmode.addEventListener("click",function(e){proveFunc()&&darkModeFunc(e)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjFfdmFycy5qcyIsIjJfc3BsaXR0ZXJfZnVuY3MuanMiLCIzX3N0eWxpbmdfZnVuY3MuanMiLCI0X3Byb2dyZXNzYmFyLmpzIiwiNV9zdGFydF9mdW5jLmpzIl0sIm5hbWVzIjpbInN0ciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIndvcmsiLCJjbGVhciIsInJlc3VsdCIsIm1lc3NhZ2UiLCJsYXJnZXIiLCJkYXJrbW9kZSIsInJlYWRPcHRpb25zIiwicGxhY2Vob2xkZXIiLCJwbGFjZWhvbGRlckVyciIsInBhcmFnc01ha2VyIiwiYXJyIiwicGFyYWdDb250ZW50IiwiY29uc29sZSIsImxvZyIsInVuZGVmaW5lZCIsIkFycmF5Iiwiam9pbiIsInBhcmFnIiwiYXBwZW5kIiwiaGVhZGVyQ29udGVudCIsImlubmVySFRNTCIsInRvU3RyaW5nIiwiaGVhZGVyTWFrZXIiLCJjcmVhdGVFbGVtZW50IiwiaGVhZGVyIiwiY291bnQiLCJzcGxpdHRlciIsImZsYWciLCJzaGlmdCIsImxlbmd0aCIsImFyclBhcmFnIiwiaSIsInB1c2giLCJtYWluRnVuYyIsInBhdHRlcm4iLCJhcmd1bWVudHMiLCJzcGwiLCJ2YWx1ZSIsInNwbGl0IiwidHJpbSIsImxhc3RQYXJhZ01hcmdpbiIsInBhcmFncyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ0YWdOYW1lIiwic3R5bGluZyIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImNoZWNrZWQiLCJzcGxpdFRleHQiLCJkaXNhYmxlZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJsYXJnZXJGdW5jIiwiZSIsImlubmVyRnVuYyIsImEiLCJiIiwicCIsInN0eWxlIiwiaGVhZGVycyIsImZvckVhY2giLCJoIiwiZm9udFNpemUiLCJncm91cCIsIm1ha2VIZWFkZXJzIiwiY2xvc2VzdCIsInRoaXMiLCJ2aXNpYmlsaXR5IiwiYWRkUHJvZ3Jlc3NCYXIiLCJlbGVtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwicmVhZGluZ1Byb2dyZXNzIiwidGFyZ2V0IiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJ3aW5Ub3AiLCJ3aW5kb3dCb3R0b20iLCJ0YXJnZXRCb3R0b20iLCJvZmZzZXRUb3AiLCJvdXRlckhlaWdodCIsIndpbmRvdyIsIndpZHRoIiwicHJvZ3Jlc3MiLCJjb250ZW50IiwiYmFja3RvdG9wIiwicHJvZ3Jlc3NCYXIiLCJpbm5lckhlaWdodCIsInByb3ZlZCIsInByb3ZlRnVuYyIsImRhcmtNb2RlRnVuYyJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBTUEsSUFBTUMsU0FBU0MsY0FBYyxhQUMvQkMsS0FBT0YsU0FBU0MsY0FBYyxhQUQ1QkYsTUFBTUMsU0FBU0MsY0FBYyxjQUMvQkMsT0FBT0YsU0FBU0MsY0FBYyxXQUM5QkUsUUFBUUgsU0FBU0MsY0FBYyxjQUMvQkcsT0FBU0osU0FBU0MsY0FBYyxlQUNoQ0ksU0FBVUwsU0FBU0MsY0FBYyxpQkFDakNLLFlBQVNOLFNBQVNDLGNBQWMsaUJBQ2hDTSxZQUFXUCxzQkFDWFEsZUFBY1Isb0NBQ2RTLFVBQVdULFNBQUdDLGNBUmxCLGVBU0lTLFlBQWNWLFNBQUdDLGNBQUE7OFBDUHJCLElBQU1VLFlBQWMsU0FBQ0MsR0FBZkQsSUFRRUUsRUFQSkMsUUFBUUMsSUFBSUgsR0FEQ0ksTUFBWEwsR0FBQUEsTUFBQUEsSUFRRUUsRUFMQUQsRUFEQUEsUUFBT0ksSUFBUEMsTUFDQUwsRUFBQU0sS0FBQSxLQUtlTixHQUhmTyxFQUFPUCxTQUFPSyxjQUFPLE1BQ2ZMLFVBQUFDLEVBQ1RULE9BQUFnQixPQUFBRCxLQUVHQSxZQUFRbkIsU0FBQUEsR0FDWm1CLElBUUlFLEVBUkVDLE1BQUFBLEdBQU4sTUFBa0JULElBUWRRLEVBQWdCVCxFQUFJVyxZQUp0QkMsRUFBV3hCLFNBQUd5QixjQUFDYixPQUNWVSxVQUFIRCxFQUNBakIsT0FBQWdCLE9BQUFNLEtBRUFMLFNBQUFBLFNBQUFBLEVBQWdCVCxHQUNwQixJQUFJYyxF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SUFBSXFELFFBR2xCaUIsS0FBQWhCLFVBQUEsRUFHRGxELE1BQU1rRCxVQUFXLElBQ3BCbEQsTUFqQkRrRCxVQUFBLEVBcUJBbEQsTUFBTW1ELGlCQUFpQixRQUFTLFdBQzVCUCxTQUFRLEdBQ1I3QyxLQUFLbUQsVUFBVyxFQUNoQmdCLEtBQUtoQixVQUFXLElBSWhCL0MsT0FBSXNGLGlCQUFrQixRQUF0QixTQUFBcEMsR0FBYXFDLGFBSVp0QyxXQUFBQyxLQUdMakQsU0FBUytDLGlCQUFpQixRQUFTLFNBQVVFLEdBRzdCcUMsYUFIaEJDLGFBQUF0QyIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHN0ciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0ZXh0YXJlYScpLFxyXG4gICAgd29yayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4ud29yaycpLFxyXG4gICAgY2xlYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLmNsZWFyJyksXHJcbiAgICByZXN1bHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0JyksXHJcbiAgICBtZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaDIubWVzc2FnZScpLFxyXG4gICAgbGFyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi5sYXJnZXInKSxcclxuICAgIGRhcmttb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi5kYXJrbW9kZScpLFxyXG4gICAgcmVhZE9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVhZC1vcHRpb25zJyksXHJcbiAgICBwbGFjZWhvbGRlciA9ICdQYXN0ZSB5b3VyIHRleHQgaW4hJyxcclxuICAgIHBsYWNlaG9sZGVyRXJyID0gJ0l0IHdvblxcJ3Qgd29yayB3aXRob3V0IGFueSB0ZXh0Li4uJyxcclxuICAgIHNwbGl0VGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zcGxpdC10ZXh0JyksXHJcbiAgICBtYWtlSGVhZGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWtlLWhlYWRlcnMnKTsiLCJcclxuXHJcbmNvbnN0IHBhcmFnc01ha2VyID0gKGFycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYXJyKTtcclxuICAgIGlmIChhcnIgPT0gdW5kZWZpbmVkIHx8IGFyciA9PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGFyciA9PSBBcnJheSkge1xyXG4gICAgICAgIGFyciA9IGFyci5qb2luKCcgJyk7XHJcbiAgICB9XHJcbiAgICBsZXQgcGFyYWdDb250ZW50ID0gYXJyO1xyXG4gICAgbGV0IHBhcmFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgcGFyYWcuaW5uZXJIVE1MID0gcGFyYWdDb250ZW50O1xyXG4gICAgcmVzdWx0LmFwcGVuZChwYXJhZyk7XHJcbn1cclxuXHJcbmNvbnN0IGhlYWRlck1ha2VyID0gKGFycikgPT4ge1xyXG4gICAgaWYgKGFyciA9PSB1bmRlZmluZWQgfHwgYXJyID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIGxldCBoZWFkZXJDb250ZW50ID0gYXJyLnRvU3RyaW5nKCk7XHJcbiAgICBsZXQgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcclxuICAgIGhlYWRlci5pbm5lckhUTUwgPSBoZWFkZXJDb250ZW50O1xyXG4gICAgcmVzdWx0LmFwcGVuZChoZWFkZXIpO1xyXG59XHJcblxyXG5jb25zdCBzcGxpdHRlciA9IChhcnIsIGZsYWcpID0+IHtcclxuICAgIGxldCBhcnJQYXJhZyA9IFtdO1xyXG4gICAgbGV0IGNvdW50ID0gMDtcclxuICAgIGlmIChmbGFnID09IHRydWUpIHtcclxuICAgICAgICBoZWFkZXJNYWtlcihhcnIuc2hpZnQoKSk7XHJcbiAgICB9XHJcbiAgICB3aGlsZSAoYXJyLmxlbmd0aCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFyclBhcmFnLnB1c2goYXJyLnNoaWZ0KCkpO1xyXG4gICAgICAgICAgICBpZiAoaSA9PSAzKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhZ3NNYWtlcihhcnJQYXJhZyk7XHJcbiAgICAgICAgICAgICAgICBhcnJQYXJhZyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY291bnQgPT0gMyAmJiBmbGFnID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlck1ha2VyKGFyci5zaGlmdCgpKTtcclxuICAgICAgICAgICAgICAgIGNvdW50ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgbWFpbkZ1bmMgPSAoc3RyLCBwYXR0ZXJuLCBmbGFnID0gZmFsc2UpID0+IHtcclxuICAgIHN0ciA9IHN0ci52YWx1ZTtcclxuICAgIGxldCBzcGwgPSBzdHIuc3BsaXQocGF0dGVybik7XHJcbiAgICBsZXQgYXJyID0gW107XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGwubGVuZ3RoIC0gMTsgaSArIDIpIHtcclxuICAgICAgICBhcnIucHVzaChuZXcgQXJyYXkoc3BsLnNoaWZ0KCksIHNwbC5zaGlmdCgpKS5qb2luKCcnKS50cmltKCkpO1xyXG4gICAgfVxyXG4gICAgc3BsaXR0ZXIoYXJyLCBmbGFnKTtcclxuICAgIGxhc3RQYXJhZ01hcmdpbigpO1xyXG59IiwiY29uc3QgbGFzdFBhcmFnTWFyZ2luID0gKCkgPT4ge1xyXG4gICAgbGV0IHBhcmFncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNyZXN1bHQtYXJlYSBwJyk7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhZ3MubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHBhcmFnc1tpXS5uZXh0RWxlbWVudFNpYmxpbmcudGFnTmFtZSA9PSAnSDMnKSB7XHJcbiAgICAgICAgICAgIHBhcmFnc1tpXS5jbGFzc05hbWUgPSAnbGFzdC1wYXJhZydcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbnN0ci5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyXHJcblxyXG5jb25zdCBzdHlsaW5nID0gKGZsYWcgPSB0cnVlKSA9PiB7XHJcbiAgICBpZiAoZmxhZykge1xyXG4gICAgICAgIG1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgcmVzdWx0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgIHJlYWRPcHRpb25zLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG1lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgcmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIHJlYWRPcHRpb25zLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcbiAgICAgICAgcmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoJ2Rhcmttb2RlJylcclxuICAgICAgICBzdHIudmFsdWUgPSAnJztcclxuICAgICAgICByZXN1bHQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgc3RyLnBsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXI7XHJcbiAgICAgICAgbWFrZUhlYWRlcnMuY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgIHNwbGl0VGV4dC5jaGVja2VkID0gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbnN0ci5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgZnVuY3Rpb24gKCkge1xyXG4gICAgd29yay5kaXNhYmxlZCA9IGZhbHNlO1xyXG59KVxyXG5cclxuY29uc3QgcHJvdmVGdW5jID0gKCkgPT4ge1xyXG4gICAgaWYgKHN0ci52YWx1ZSA9PSAnJyB8fCBzdHIudmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgIHN0ci5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyRXJyO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsYXJnZXJGdW5jKGUpIHtcclxuICAgIGxldCBwYXJhZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjcmVzdWx0LWFyZWEgcCcpO1xyXG4gICAgbGV0IGhlYWRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjcmVzdWx0LWFyZWEgaDMnKTtcclxuXHJcbiAgICBjb25zdCBpbm5lckZ1bmMgPSAoYSwgYikgPT4ge1xyXG4gICAgICAgIHBhcmFncy5mb3JFYWNoKChwKSA9PiB7XHJcbiAgICAgICAgICAgIHAuc3R5bGUuZm9udFNpemUgPSBhO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgaGVhZGVycy5mb3JFYWNoKChoKSA9PiB7XHJcbiAgICAgICAgICAgIGguc3R5bGUuZm9udFNpemUgPSBiO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGxhcmdlci52YWx1ZSA9PSAnbWFrZSBsYXJnZXInKSB7XHJcbiAgICAgICAgbGFyZ2VyLnZhbHVlID0gJ21ha2Ugbm9ybWFsJztcclxuICAgICAgICBpbm5lckZ1bmMoMS40ICsgJ3JlbScsIDIgKyAncmVtJyk7XHJcblxyXG4gICAgfSBlbHNlIGlmIChsYXJnZXIudmFsdWUgPT0gJ21ha2Ugbm9ybWFsJykge1xyXG4gICAgICAgIGxhcmdlci52YWx1ZSA9ICdtYWtlIGxhcmdlcic7XHJcbiAgICAgICAgaW5uZXJGdW5jKDEgKyAncmVtJywgMS43NSArICdyZW0nKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZGFya01vZGVGdW5jKGUpIHtcclxuICAgIGlmIChkYXJrbW9kZS52YWx1ZSA9PSAnZGFyayBtb2RlJykge1xyXG4gICAgICAgIGRhcmttb2RlLnZhbHVlID0gJ2RheSBtb2RlJztcclxuICAgICAgICByZXN1bHQuY2xhc3NMaXN0LmFkZCgnZGFya21vZGUnKVxyXG5cclxuICAgIH0gZWxzZSBpZiAoZGFya21vZGUudmFsdWUgPT0gJ2RheSBtb2RlJykge1xyXG4gICAgICAgIGRhcmttb2RlLnZhbHVlID0gJ2RhcmsgbW9kZSc7XHJcbiAgICAgICAgcmVzdWx0LmNsYXNzTGlzdC5yZW1vdmUoJ2Rhcmttb2RlJylcclxuICAgIH1cclxufVxyXG5cclxuc3BsaXRUZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBncm91cCA9IG1ha2VIZWFkZXJzLmNsb3Nlc3QoJ2RpdicpO1xyXG4gICAgaWYgKHRoaXMuY2hlY2tlZCA9PSB0cnVlKSB7XHJcbiAgICAgICAgZ3JvdXAuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZ3JvdXAuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgfVxyXG59KSIsImNvbnN0IGFkZFByb2dyZXNzQmFyID0gKCkgPT4ge1xyXG4gICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGVsZW1lbnQuaWQgPSAncHJvZ3Jlc3MtY29udGFpbmVyJztcclxuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gJzxkaXYgaWQ9XCJwcm9ncmVzcy1iYXJcIj48L2Rpdj4nO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxufTtcclxuXHJcbmNvbnN0IHJlYWRpbmdQcm9ncmVzcyA9ICh0YXJnZXQpID0+IHtcclxuXHJcbiAgICBsZXQgd2luVG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0IC0gNjAwIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgLSA2MDA7XHJcbiAgICBsZXQgdGFyZ2V0Qm90dG9tID0gdGFyZ2V0Lm9mZnNldFRvcCArIHRhcmdldC5zY3JvbGxIZWlnaHQgLSA3ODA7XHJcbiAgICBsZXQgd2luZG93Qm90dG9tID0gd2luVG9wICsgd2luZG93Lm91dGVySGVpZ2h0O1xyXG4gICAgbGV0IHByb2dyZXNzID0gMTAwIC0gKCgodGFyZ2V0Qm90dG9tIC0gd2luZG93Qm90dG9tICsgd2luZG93Lm91dGVySGVpZ2h0IC8gMykgLyAodGFyZ2V0Qm90dG9tIC0gd2luZG93Lm91dGVySGVpZ2h0ICsgd2luZG93Lm91dGVySGVpZ2h0IC8gMykpICogMTAwKTtcclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZ3Jlc3MtYmFyJykuc3R5bGUud2lkdGggPSBwcm9ncmVzcyArICclJztcclxuXHJcbiAgICAocHJvZ3Jlc3MgPiAxMDApID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2dyZXNzLWNvbnRhaW5lcicpLmNsYXNzTGlzdC5hZGQoJ3JlYWR5JykgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZ3Jlc3MtY29udGFpbmVyJykuY2xhc3NMaXN0LnJlbW92ZSgncmVhZHknKTtcclxufTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XHJcbiAgICBsZXQgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQnKTtcclxuICAgIGFkZFByb2dyZXNzQmFyKCk7XHJcbiAgICByZWFkaW5nUHJvZ3Jlc3MoY29udGVudCk7XHJcbiAgICBsZXQgcHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZ3Jlc3MtYmFyJyk7XHJcbiAgICBsZXQgYmFja3RvdG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhY2stdG8tdG9wJylcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCA+IDYwMCkge1xyXG4gICAgICAgICAgICByZWFkaW5nUHJvZ3Jlc3MoY29udGVudCk7XHJcbiAgICAgICAgICAgIHByb2dyZXNzQmFyLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCA+IHdpbmRvdy5pbm5lckhlaWdodCAvIDEuNSkge1xyXG4gICAgICAgICAgICBiYWNrdG90b3AuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJhY2t0b3RvcC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pOyIsIlxyXG53b3JrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IHByb3ZlZCA9IHByb3ZlRnVuYygpO1xyXG5cclxuICAgIGlmIChwcm92ZWQgJiYgc3BsaXRUZXh0LmNoZWNrZWQgPT0gdHJ1ZSkge1xyXG4gICAgICAgIHN0eWxpbmcodHJ1ZSk7XHJcbiAgICAgICAgaWYgKG1ha2VIZWFkZXJzLmNoZWNrZWQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBtYWluRnVuYyhzdHIsIC8oXFwufFxcIXxcXD8pLywgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1haW5GdW5jKHN0ciwgLyhcXC58XFwhfFxcPykvLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChwcm92ZWQgJiYgc3BsaXRUZXh0LmNoZWNrZWQgPT0gZmFsc2UpIHtcclxuICAgICAgICBzdHlsaW5nKHRydWUpO1xyXG4gICAgICAgIHBhcmFnc01ha2VyKHN0ci52YWx1ZSlcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIGNsZWFyLmRpc2FibGVkID0gZmFsc2U7XHJcbn0pXHJcblxyXG5jbGVhci5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG5jbGVhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIHN0eWxpbmcoZmFsc2UpO1xyXG4gICAgd29yay5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7XHJcbn0pXHJcblxyXG5sYXJnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgbGV0IHByb3ZlZCA9IHByb3ZlRnVuYygpO1xyXG5cclxuICAgIGlmIChwcm92ZWQpIHtcclxuICAgICAgICAobGFyZ2VyRnVuYyhlKSlcclxuICAgIH1cclxufSlcclxuXHJcbmRhcmttb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGxldCBwcm92ZWQgPSBwcm92ZUZ1bmMoKTtcclxuXHJcbiAgICBpZiAocHJvdmVkKSB7XHJcbiAgICAgICAgKGRhcmtNb2RlRnVuYyhlKSlcclxuICAgIH1cclxufSlcclxuXHJcbiJdfQ==
